# AI营养师意图识别系统 - UAT测试用例

## 测试目标
验证AI营养师意图识别系统能够准确识别用户输入内容，正确分类意图标签，并按照标准格式输出结构化数据。

## 测试范围
- 6个核心标签识别准确性
- 图片处理机制验证
- 输出格式规范性检查
- 边界情况处理能力
- 多模态输入处理能力

---

## 🧪 核心功能测试用例

### TC001 - food_log 食物记录测试

#### TC001-1：纯文本食物记录
**测试输入**：
```
"今天早餐吃了煎蛋、全麦面包和牛奶"
```
**预期输出**：
```json
[{"food_log":"今天早餐吃了煎蛋、全麦面包和牛奶", "image":[]}]
```
**验收标准**：✅ 正确识别为food_log ✅ 文本内容完整保留 ✅ image字段为空数组

#### TC001-2：文本+单图食物记录
**测试输入**：
```
文本："午餐时间到了"
图片：lunch_salad.jpg（沙拉图片）
```
**预期输出**：
```json
[{"food_log":"午餐时间到了", "image":["lunch_salad.jpg"]}]
```
**验收标准**：✅ 正确识别为food_log ✅ 图片URL正确嵌入

#### TC001-3：纯图片食物记录（单图）
**测试输入**：
```
图片：breakfast_combo.jpg（早餐组合图片）
```
**预期输出**：
```json
[{"food_log":"早餐记录", "image":["breakfast_combo.jpg"]}]
```
**验收标准**：✅ 自动生成合理的任务描述 ✅ 图片正确处理

#### TC001-4：多图片同类型食物记录
**测试输入**：
```
文本："今天的晚餐很丰盛"
图片：dinner1.jpg, dinner2.jpg, dinner3.jpg
```
**预期输出**：
```json
[{"food_log":"今天的晚餐很丰盛", "image":["dinner1.jpg","dinner2.jpg","dinner3.jpg"]}]
```
**验收标准**：✅ 多图片正确合并 ✅ URL数组格式正确

### TC002 - weight 体重记录测试

#### TC002-1：文本体重记录
**测试输入**：
```
"今天体重62.5公斤，比昨天轻了0.3kg"
```
**预期输出**：
```json
[{"weight":"今天体重62.5公斤，比昨天轻了0.3kg", "image":[]}]
```

#### TC002-2：体重截图记录
**测试输入**：
```
图片：weight_scale.jpg（体重秤显示62.1kg）
```
**预期输出**：
```json
[{"weight":"体重记录", "image":["weight_scale.jpg"]}]
```

#### TC002-3：体重APP截图
**测试输入**：
```
文本："一周体重变化趋势"
图片：weight_app_chart.jpg
```
**预期输出**：
```json
[{"weight":"一周体重变化趋势", "image":["weight_app_chart.jpg"]}]
```

### TC003 - exercise 运动记录测试

#### TC003-1：文本运动记录
**测试输入**：
```
"今天跑步5公里，用时35分钟，平均配速7分钟每公里"
```
**预期输出**：
```json
[{"exercise":"今天跑步5公里，用时35分钟，平均配速7分钟每公里", "image":[]}]
```

#### TC003-2：运动APP截图
**测试输入**：
```
图片：running_app.jpg（跑步轨迹截图）
```
**预期输出**：
```json
[{"exercise":"运动记录", "image":["running_app.jpg"]}]
```

#### TC003-3：健身房打卡
**测试输入**：
```
文本："今天的力量训练完成"
图片：gym_equipment.jpg, workout_data.jpg
```
**预期输出**：
```json
[{"exercise":"今天的力量训练完成", "image":["gym_equipment.jpg","workout_data.jpg"]}]
```


### TC005 - food_update 食物修改测试

#### TC005-1：热量修改
**测试输入**：
```
"刚才记录的午餐热量算错了，应该是450卡路里不是350"
```
**预期输出**：
```json
[{"food_update":"刚才记录的午餐热量算错了，应该是450卡路里不是350", "image":[]}]
```

#### TC005-2：食材修改
**测试输入**：
```
"早餐的面包是全麦的，不是白面包"
```
**预期输出**：
```json
[{"food_update":"早餐的面包是全麦的，不是白面包", "image":[]}]
```

### TC006 - convo 一般对话测试

#### TC006-1：营养咨询
**测试输入**：
```
"减脂期间可以吃香蕉吗？"
```
**预期输出**：
```json
[{"convo":"减脂期间可以吃香蕉吗？", "image":[]}]
```

#### TC006-2：健康问题
**测试输入**：
```
"最近总是感觉饿得很快，这正常吗？"
```
**预期输出**：
```json
[{"convo":"最近总是感觉饿得很快，这正常吗？", "image":[]}]
```

### TC007 - needs_help 人工转接测试

#### TC007-1：明确求助
**测试输入**：
```
"我的减重计划遇到瓶颈，希望营养师帮我看看"
```
**预期输出**：
```json
[{"needs_help":"我的减重计划遇到瓶颈，希望营养师帮我看看", "image":[]}]
```

#### TC007-2：复杂问题
**测试输入**：
```
"有糖尿病家族史，体重又超标，不知道怎么制定饮食计划"
```
**预期输出**：
```json
[{"needs_help":"有糖尿病家族史，体重又超标，不知道怎么制定饮食计划", "image":[]}]
```

---

## 🔀 混合场景测试用例

### TC101 - 多意图混合场景

#### TC101-1：食物+体重混合
**测试输入**：
```
文本："今天的记录"
图片：lunch.jpg（午餐图片）, weight.jpg（体重62kg）
```
**预期输出**：
```json
[
  {"food_log":"今天的记录", "image":["lunch.jpg"]},
  {"weight":"今天的记录", "image":["weight.jpg"]}
]
```

#### TC101-2：三项记录混合
**测试输入**：
```
文本："今日完整打卡"
图片：breakfast.jpg, exercise_data.jpg
```
**预期输出**：
```json
[
  {"food_log":"今日完整打卡", "image":["breakfast.jpg"]},
  {"exercise":"今日完整打卡", "image":["exercise_data.jpg"]},
]
```

#### TC101-3：需要帮助+记录混合
**测试输入**：
```
文本："体重一直降不下来，很苦恼，今天又吃多了"
图片：overeating.jpg
```
**预期输出**：
```json
[
  {"needs_help":"体重一直降不下来，很苦恼", "image":[]},
  {"food_log":"今天又吃多了", "image":["overeating.jpg"]}
]
```

### TC102 - 边界情况测试

#### TC102-1：模糊图片内容
**测试输入**：
```
图片：blurry_food.jpg（模糊不清的食物图片）
```
**预期输出**：
```json
[{"convo":"图片内容", "image":["blurry_food.jpg"]}]
```

#### TC102-2：非食物图片+食物文本
**测试输入**：
```
文本："今天吃了很多水果"
图片：landscape.jpg（风景图片）
```
**预期输出**：
```json
[{"food_log":"今天吃了很多水果", "image":[]}]
```

#### TC102-3：空白或无意义输入
**测试输入**：
```
文本："。。。"
```
**预期输出**：
```json
[{"convo":"。。。", "image":[]}]
```

#### TC102-4：URL获取失败
**测试输入**：
```
文本："早餐记录"
图片：[无法获取URL]
```
**预期输出**：
```json
[{"food_log":"早餐记录", "image":["placeholder"]}]
```

---

## 🎯 性能和质量测试

### TC201 - 输出格式验证

#### TC201-1：JSON格式合法性
**验证项目**：
- ✅ 输出必须是合法的JSON数组
- ✅ 每个对象包含标签名和image字段
- ✅ image字段必须是数组格式
- ✅ 字符串正确转义

#### TC201-2：标签名准确性
**验证项目**：
- ✅ 只能输出预定义的6个核心标签
- ✅ needs_help必须排在数组首位
- ✅ 标签名拼写完全正确

#### TC201-3：内容完整性
**验证项目**：
- ✅ 用户输入的文本内容不能丢失
- ✅ 图片URL完整保留
- ✅ 任务描述准确反映用户意图

### TC202 - 压力测试

#### TC202-1：大批量图片处理
**测试输入**：
```
10张不同类型的图片同时输入
```
**验收标准**：
- ✅ 所有图片正确分类
- ✅ 输出格式保持一致
- ✅ 处理时间在可接受范围内

#### TC202-2：长文本处理
**测试输入**：
```
500字的详细饮食日记
```
**验收标准**：
- ✅ 文本内容不截断
- ✅ 意图识别准确
- ✅ 输出格式正确

---

## 📊 测试执行标准

### 通过标准
- **功能正确性**：≥95% 的测试用例意图识别正确
- **格式规范性**：100% 的输出符合JSON格式要求
- **内容完整性**：100% 的用户输入内容得到保留
- **边界处理**：≥90% 的边界情况得到合理处理

### 测试优先级
1. **P0（核心功能）**：TC001-TC007 单一意图识别
2. **P1（重要功能）**：TC101 多意图混合场景
3. **P2（边界情况）**：TC102 边界情况处理
4. **P3（性能质量）**：TC201-TC202 性能和质量测试

### 缺陷分级
- **严重**：意图识别错误、输出格式错误
- **一般**：任务描述不准确、图片URL处理异常
- **轻微**：文案表述优化、性能优化建议

---

## 🔍 测试执行检查清单

### 执行前检查
- [ ] 测试环境准备就绪
- [ ] 测试数据（图片、文本）准备完整
- [ ] 预期结果已明确定义

### 执行中记录
- [ ] 实际输出结果
- [ ] 执行时间记录
- [ ] 异常情况记录

### 执行后验证
- [ ] 结果与预期对比
- [ ] JSON格式验证
- [ ] 缺陷记录和分级
- [ ] 通过率统计

这套UAT测试用例覆盖了AI营养师意图识别系统的核心功能、边界情况和性能要求，确保系统在实际使用中的稳定性和准确性。
